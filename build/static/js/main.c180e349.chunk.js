(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{14:function(e,n,t){e.exports=t(37)},19:function(e,n,t){},37:function(e,n,t){"use strict";t.r(n);var a=t(0),r=t.n(a),c=t(13),u=t.n(c),o=(t(19),t(2)),l=function(e){var n=e.newSearch,t=e.handler;return r.a.createElement("div",null,"Search by Name",r.a.createElement("input",{value:n,onChange:t}))},i=function(e){var n=e.addPerson,t=e.nameHandler,a=e.numberHandler,c=e.newName,u=e.newNumber;return r.a.createElement("form",{onSubmit:n},r.a.createElement("div",null,"name: ",r.a.createElement("input",{value:c,onChange:t}),r.a.createElement("br",null),"number: ",r.a.createElement("input",{value:u,onChange:a})),r.a.createElement("div",null,r.a.createElement("button",{type:"submit"},"add")))},m=function(e){var n=e.persons,t=e.newSearch,a=e.removePerson;return r.a.createElement("table",null,r.a.createElement("tbody",null,(0===t.length?n:n.filter((function(e){return e.name.toLowerCase().includes(t.toLowerCase())}))).map((function(e){return r.a.createElement("tr",{key:e.name},r.a.createElement("td",null,e.name),r.a.createElement("td",null,e.number),r.a.createElement("td",null,r.a.createElement("button",{onClick:function(){return a(e.id)}},"Remove")))}))))},s=t(3),d=t.n(s),f="/api/persons",b=function(){return d.a.get(f)},h=function(e){return d.a.post(f,e)},E=function(e,n){return d.a.put("".concat(f,"/").concat(e),n)},v=function(e){return d.a.delete("".concat(f,"/").concat(e))},w=function(e){var n=e.errorMessage,t=e.successMessage;return null===n&&null===t?null:null!==n?r.a.createElement("div",{className:"error"},n):null!==t?r.a.createElement("div",{className:"success"},t):void 0},p=function(){var e=Object(a.useState)([]),n=Object(o.a)(e,2),t=n[0],c=n[1],u=Object(a.useState)(""),s=Object(o.a)(u,2),d=s[0],f=s[1],p=Object(a.useState)(""),g=Object(o.a)(p,2),O=g[0],S=g[1],j=Object(a.useState)(""),y=Object(o.a)(j,2),C=y[0],N=y[1],k=Object(a.useState)(null),L=Object(o.a)(k,2),P=L[0],M=L[1],H=Object(a.useState)(null),J=Object(o.a)(H,2),T=J[0],D=J[1];Object(a.useEffect)((function(){b().then((function(e){JSON.stringify(e.data)!==JSON.stringify(t)&&c(e.data)}))}),[t]);return r.a.createElement("div",null,r.a.createElement("h2",null,"Phonebook"),r.a.createElement(l,{newSearch:C,handler:function(e){N(e.target.value)}}),r.a.createElement("h2",null,"Add A Number"),r.a.createElement(i,{addPerson:function(e){e.preventDefault();var n={name:d,number:O};if(0===t.filter((function(e){return 0===e.name.toLowerCase().indexOf(d.toLowerCase())})).length)h(n).then((function(e){c(t.concat(e.data)),D("".concat(d," has been added!")),setTimeout((function(){D(null)}),5e3)}));else if(!0===window.confirm("".concat(d," is already in the directory, would you like to replace the old number with a new one?"))){var a=t.find((function(e){return e.name.toLowerCase()===d.toLowerCase()}));a.number=O,E(a.id,a).then((function(e){c(t.map((function(n){return n.id!==a.id?n:e.data}))),D("".concat(d,"'s number has been modified!")),setTimeout((function(){D(null)}),5e3)}))}},newName:d,newNumber:O,nameHandler:function(e){f(e.target.value)},numberHandler:function(e){S(e.target.value)}}),r.a.createElement(w,{successMessage:T,errorMessage:P}),r.a.createElement("h2",null,"Phone Directory"),r.a.createElement(m,{persons:t,newSearch:C,removePerson:function(e){var n=t.find((function(n){return n.id===e}));!0===window.confirm("Delete ".concat(n.name,"?"))&&v(e).then(b().then((function(e){c(e.data),D("".concat(n.name," has been removed!")),setTimeout((function(){D(null)}),5e3)}))).catch((function(e){M("".concat(n.name," has already been removed from the directory!")),setTimeout((function(){M(null)}),5e3)}))}}))};u.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(p,null)),document.getElementById("root"))}},[[14,1,2]]]);
//# sourceMappingURL=main.c180e349.chunk.js.map